name: distr-agent
services:
  agent:
    network_mode: host
    restart: unless-stopped
    image: 'ghcr.io/glasskube/distr/docker-agent:{{ .agentVersion }}'
    environment:
      GK_TARGET_ID: '{{ .targetId }}'
      GK_TARGET_SECRET: '{{ .targetSecret }}'
      GK_LOGIN_ENDPOINT: '{{ .loginEndpoint }}'
      GK_MANIFEST_ENDPOINT: '{{ .manifestEndpoint }}'
      GK_RESOURCE_ENDPOINT: '{{ .resourcesEndpoint }}'
      GK_STATUS_ENDPOINT: '{{ .statusEndpoint }}'
      GK_INTERVAL: '{{ .agentInterval }}'
      GK_AGENT_VERSION_ID: '{{ .agentVersionId }}'
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
